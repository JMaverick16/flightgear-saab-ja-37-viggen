<?xml version="1.0"?>
<PropertyList>
  <path>Models/Effects/procedural_light.ac</path>

  <effect>
    <inherits-from>Aircraft/JA37/Models/Effects/proc-als-lights/nav-light-left</inherits-from>
    <object-name>procedural_light</object-name>
  </effect>

  <animation>
    <type>select</type>
    <object-name>procedural_light</object-name>
    <condition>
      <property>sim/hitches/aerotow/is-slave</property><!-- fdm/jsbsim/fcs/wings/serviceable -->
    </condition>
  </animation>

  <!-- A better solution would be to use
       <intensity_scale><use>property</use></intensity_scale>
       in the corresponding .eff file, but this does not work with MP properties
       because they are tied. As a replacement, this does a reasonable job.
  -->
  <animation>
    <type>scale</type>
    <object-name>procedural_light</object-name>
    <property>sim/multiplay/generic/short[0]</property> <!-- /ja37/effect/navigation-light (0-100 scale) -->
    <!-- This is a stupid hack for backward compatibility.
         Old models will have generic/short[0] = 0 (because unset), but set the 
         appropriate bit in generic/int[9]. Thus, to work with old models, the
         light is scaled down following short[0] _unless_ it is 0. When it is 0,
         int[9] is used to decide
    -->
    <interpolation>
      <entry><ind>0</ind><dep>1.0</dep></entry>
      <entry><ind>1</ind><dep>0.01</dep></entry>
      <entry><ind>100</ind><dep>1.0</dep></entry>
    </interpolation>
  </animation>

  <animation>
    <type>select</type>
    <object-name>procedural_light</object-name>
    <condition>
      <or>
        <property>sim/multiplay/generic/short[0]</property> <!-- /ja37/effect/navigation-light -->
        <!-- backward compatibility - nav: bit 3 -->
        <equals>
          <property>sim/multiplay/generic/int[9]</property>
          <value>4</value>
        </equals>
        <equals>
          <property>sim/multiplay/generic/int[9]</property>
          <value>5</value>
        </equals>
        <equals>
          <property>sim/multiplay/generic/int[9]</property>
          <value>6</value>
        </equals>            
        <equals>
          <property>sim/multiplay/generic/int[9]</property>
          <value>7</value>
        </equals>
      </or>
    </condition>
  </animation>

  <animation>
    <type>dist-scale</type>
    <object-name>procedural_light</object-name>
    <interpolation>
      <entry><ind>0</ind><dep>1.0</dep></entry>
      <entry><ind>3000</ind><dep>10.0</dep></entry>
    </interpolation>
  </animation>
</PropertyList>
